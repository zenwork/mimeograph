!function(e){function t(t){for(var s,o,a=t[0],c=t[1],d=t[2],h=0,l=[];h<a.length;h++)o=a[h],i[o]&&l.push(i[o][0]),i[o]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);for(u&&u(t);l.length;)l.shift()();return r.push.apply(r,d||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],s=!0,a=1;a<n.length;a++){var c=n[a];0!==i[c]&&(s=!1)}s&&(r.splice(t--,1),e=o(o.s=n[0]))}return e}var s={},i={3:0},r=[];function o(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=s,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(n,s,function(t){return e[t]}.bind(null,s));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var a=window.webpackJsonp=window.webpackJsonp||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var d=0;d<a.length;d++)t(a[d]);var u=c;r.push([23,0]),n()}({0:function(e,t,n){"use strict";n.d(t,"g",function(){return s}),n.d(t,"h",function(){return i}),n.d(t,"f",function(){return r}),n.d(t,"b",function(){return o}),n.d(t,"e",function(){return a}),n.d(t,"c",function(){return c}),n.d(t,"d",function(){return d}),n.d(t,"a",function(){return u});const s="md-join",i="md-acceptor-ready",r="md-join-request",o="md-join-accepted",a="md-join-ready",c="md-join-catchup",d="md-join-leaving";class u{static createRequest(e){return new CustomEvent(s,{detail:{type:r,source:e}})}static createAccept(e){return new CustomEvent(s,{detail:{type:o,source:e}})}static createReady(e){return new CustomEvent(s,{detail:{type:a,source:e}})}static createCatchup(e){return new CustomEvent(s,{detail:{type:c,source:e}})}static createAcceptorReady(e){return new CustomEvent(s,{detail:{type:i,source:e}})}static createLeaving(e){return new CustomEvent(s,{detail:{type:d,source:e}})}}},13:function(e,t,n){"use strict";n.d(t,"a",function(){return s});class s{constructor(e,t,n){this.key=e,this.title=t,this.content=n}}},16:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var s=n(5),i=n(0);class r extends s.a{static get name(){return"md-parent"}constructor(){super(),this.joiners={}}connectedCallback(){this.initParent()}initParent(){this.addEventListener(i.g,e=>{let t=e.detail.source;switch(e.detail.type){case i.f:this.requestToJoin(t);break;case i.e:this.joinerReady(t);break;case i.d:this.joinerLeaving(t)}}),this.dispatchEvent(i.a.createAcceptorReady(this))}requestToJoin(e){console.debug(`${this.Class} is accepting ${e.Class}:${e.Id} request to join`),e.dispatchEvent(i.a.createAccept(this))}joinerReady(e){Object.keys(this.joiners).forEach(t=>{let n=this.joiners[t];e.dispatchEvent(i.a.createCatchup(n))}),this.joiners[e.hashcode()]=e}joinerLeaving(e){delete this.joiners[e.hashcode()]}}},23:function(e,t,n){"use strict";n.r(t);var s=n(1),i=n(16),r=n(7),o=n(4),a=n(13);class c extends r.a{static get name(){return"md-static-store"}static get properties(){return{store:{type:Object,attribute:!1}}}connectedCallback(){if("standalone"===this.joinParent("md-view"))throw Error("md-static-store can not work in standalone mode")}disconnectedCallback(){this.observer.disconnect()}onAccepted(e){this.store=[],this.shadowRoot.store=this.store,Object(o.g)("MD-STATIC-STORE",this.updateStore,this),Object(o.a)(this,this.index),super.ready()}onSiblingReady(e){switch(e.Class){case"md-story":break;case"md-list":const t=this;Object(o.e)(e,e=>{let n=e.detail.key,s=e.detail.title,i=t.findContent(t,n);Object(o.c)(t,new a.a(n,s,i))}),this.innerHTML&&this.updateStore(this.innerHTML,this)}}updateStore(e,t){t.updateStories(t,e),t.updateIndex(t)}updateStories(e,t){e.store=JSON.parse(t.trim()),e.shadowRoot.store=e.store;let n=new CustomEvent("md-store-updated");e.dispatchEvent(n)}updateIndex(e){let t={};e.store.forEach(e=>{t[e.key]=e.title}),e.index=t,Object(o.a)(e,e.index)}findContent(e,t){return e.store.filter(e=>e.key===t)[0].content}render(){return s["b"]``}}c.define();class d extends r.a{static get name(){return"md-store"}static get properties(){return{src:{type:String},stories:{type:String}}}connectedCallback(){if("standalone"===this.joinParent("md-view"))throw Error("md-static-store can not work in standalone mode")}onAccepted(e){this.index={},this.updateIndex(this.index,this),this.fetch(this,this.src,(e,t)=>{e.updateIndex(JSON.parse(t),e)}),this.ready()}onSiblingReady(e){const t=this;switch(e.Class){case"md-list":Object(o.e)(e,e=>{this.fetch(t,t.stories+e.detail.key+".md",(t,n)=>{t.addToStore(e.detail,n,t)})})}}fetch(e,t,n){const s=new XMLHttpRequest;s.onreadystatechange=(()=>{4===s.readyState&&200===s.status&&n(e,s.responseText)}),s.open("GET",t,!0),s.send()}render(){return s["b"]``}addToStore(e,t,n){let s=new a.a(e.key,e.title);s.content=t,n.story=s,Object(o.c)(n,n.story)}updateIndex(e,t){t.shadowRoot.value=t.index=e,Object.keys(t.index).length>0&&Object(o.a)(t,t.index)}}d.define("md-store"),n.d(t,"MdView",function(){return u}),c.define(),d.define();class u extends i.a{static get name(){return"md-view"}static get properties(){return{joiners:{type:Object,attribute:!1}}}joinerReady(e){super.joinerReady(e),this.joiners={...this.joiners}}render(){return s["b"]`<slot></slot>`}}u.define()},4:function(e,t,n){"use strict";function s(e,t,n){const s=new MutationObserver(function(s){s.forEach(function(s){if("childList"===s.type&&s.target.nodeName===e.toUpperCase()){let e=s.target.innerHTML;try{e&&t(e,n)}catch(e){throw e}}})});return s.observe(n,{attributes:!1,childList:!0,subtree:!1}),s}n.d(t,"g",function(){return s}),n.d(t,"a",function(){return r}),n.d(t,"d",function(){return o}),n.d(t,"b",function(){return a}),n.d(t,"e",function(){return c}),n.d(t,"c",function(){return d}),n.d(t,"f",function(){return u});const i="md-store-index-updated";function r(e,t){e.dispatchEvent(new CustomEvent(i,{detail:t}))}function o(e,t){e.addEventListener(i,t)}function a(e,t){let n=new CustomEvent("md-list-selection",{detail:t});e.dispatchEvent(n)}function c(e,t){e.addEventListener("md-list-selection",t)}function d(e,t){let n=new CustomEvent("md-store-story",{detail:t});e.dispatchEvent(n)}function u(e,t){e&&e.addEventListener("md-store-story",t)}},5:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var s=n(1);let i=0;class r extends s.a{constructor(){if(super(),this.Id=i++,this.Class=new.target.name,new.target===r)throw new TypeError("Cannot construct BaseElement instances directly")}hashcode(){return this.Class+":"+this.Id}connectedCallback(){}static define(e){try{const t=this;if(e)window.customElements.define(e,t);else{if(!this.name)throw Error("either define [static this.name] or provide a valid name to the define(name) function");window.customElements.define(this.name,t)}}catch(t){console.debug(`swallowing custom component define() for [${e||this.name}] error: ${t.message}`)}}createRenderRoot(){return this.attachShadow({mode:"open"})}}},7:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var s=n(5),i=n(0);class r extends s.a{static get name(){return"md-child"}constructor(){super(),this.ancestor=null,this.siblings=[]}beforeJoining(){}initStandalone(){}onAccepted(e){}onSiblingReady(e){}onJoinerLeaving(e){}ready(){this.ancestor.dispatchEvent(i.a.createReady(this))}connectedCallback(){this.joinParent("md-parent")}disconnectedCallback(){this.ancestor.dispatchEvent(i.a.createLeaving(this))}joinParent(e){const t=this;return e&&(this.ancestor=this.closest(e))?(this.beforeJoining(),this.addEventListener(i.g,function(e){let n=e.detail,s=n.source;switch(n.type){case i.b:t.onAccepted(s);break;case i.c:s.hashcode()!==t.hashcode()&&t.siblings.indexOf(s.hashcode())<0&&(console.debug(`${t.hashcode()} catching up with ${s.hashcode()}`),t.siblings.push(s.hashcode()),t.onSiblingReady(s))}}),this.ancestor.addEventListener(i.g,function(e){let n=e.detail,s=n.source;if(s.hashcode()&&s.hashcode()!==t.hashcode()){let e=n.type;switch(e){case i.h:t.join();break;case i.e:t.siblings.includes(s.hashcode())||(t.siblings.push(s.hashcode()),t.onSiblingReady(s));break;case i.d:t.siblings.indexOf(s.hashcode())>-1&&(delete t.siblings[t.siblings.findIndex(e=>e===s.hashcode())],t.onJoinerLeaving(s))}}}),this.join(),"cooperative"):(this.initStandalone(),"standalone")}join(){this.ancestor&&this.ancestor.dispatchEvent(i.a.createRequest(this))}}}});
//# sourceMappingURL=md-view.js.map